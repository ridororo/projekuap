#include <ncurses/curses.h>
#include <iostream>

void menu(WINDOW *menu_win, int pilihanTerpilih, const char *opsi[], int jumlahOpsi);
void loadingBar(){
    
initscr();
for (int i=0; i<4; i++) {
mvprintw(12, 50, "Loading...");
mvprintw(13, 50, "------------------"); 
mvprintw(14, 50, "|                |");
mvprintw(15, 50, "------------------");

for (int f=1; f<17; f++) {
mvprintw(14, 50 + f, ">");
refresh(); 
Sleep (100); 
}
}
}

int main(){
	system("color C");
	initscr();
	clear();
	noecho();
	cbreak();
	int awalX = 50, awalY = 10; 
	int lebar = 15, tinggi = 12;
	
	WINDOW *menu_win = newwin(tinggi, lebar, awalY, awalX);
	keypad(menu_win, TRUE);
	
	mvprintw(5, 39, ">>>Selamat Datang di Menu Permainan<<<");
	refresh();
	
	mvprintw(8, 44, "Silahkan Pilih Menu Di Bawah");
	refresh();
	
	const char *opsi[] = {
	"|    Start   |", 
	"|Leader Board|", 
	"|   Setting  |", 
	"|    Exit    |" 
	
	};
	int jumlahOpsi = sizeof(opsi) / sizeof(char *);
	int pilihanTerpilih = 0;
	int pilihan = -1;
	
	while (1){
		menu(menu_win, pilihanTerpilih, opsi, jumlahOpsi);
		int tombol = wgetch(menu_win);
		switch (tombol){
			case KEY_UP :
				if (pilihanTerpilih == 0)
				pilihanTerpilih = jumlahOpsi - 1;
				else 
				--pilihanTerpilih;
				break;
			case KEY_DOWN:
				if (pilihanTerpilih == jumlahOpsi - 1)
				pilihanTerpilih = 0;
				else
				++pilihanTerpilih;
				break;
			case 10:
				pilihan = pilihanTerpilih;
				break;
		}
		if (pilihan == 3)
		break;
	}
	clear();
ladingBar();
	clrtoeol();
	refresh();
	endwin();
	return 0;
} 

void menu(WINDOW *menu_win, int pilihanTerpilih, const char *opsi[], int jumlahOpsi){

  for (int i = 0; i < jumlahOpsi; i++){
	if (i == pilihanTerpilih)
	wattron(menu_win, A_REVERSE);
	mvwprintw(menu_win, i + 1, 1, opsi[i]);
	wattroff(menu_win, A_REVERSE);
}
wrefresh(menu_win);
}
